<!DOCTYPE html>
<html lang="en">
<head>

  <!-- Basic Page Needs
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <meta charset="utf-8">
  <title>Your page title here :)</title>
  <meta name="description" content="">
  <meta name="author" content="Gurjot.">

  <!-- Mobile Specific Metas
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- CSS
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link rel="stylesheet" href="css/bootstrap.min.css">
  <link rel="stylesheet" href="css/scrolly.css">
  <style>
    html, body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen,
    Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
    }

    .grid-container {
      display: grid;
      grid-template-columns: 1fr 1fr;
      grid-template-rows: 1fr 1fr;
      gap: 10px 5px;
      grid-template-areas:
        "btn-1 btn-2"
        "btn-3 btn-4"
        "btn-5 btn-6";
    }

    .btn-1 { grid-area: btn-1; }

    .btn-2 { grid-area: btn-2; }

    .btn-3 { grid-area: btn-3; }

    .btn-4 { grid-area: btn-4; }

    .btn-5 { grid-area: btn-5; }

    .btn-6 { grid-area: btn-6; }

    .grid-boy {
      display: flex;
      align-items: center;
      justify-content: center;
    }
    section {
      margin: 5rem auto;
    }
  </style>

</head>
<body>

  <!-- Primary Page Layout -->
  <div class="container" style="margin-top: 4rem;">
    <!-- Lede -->
    <article>
      <section>
        <div class="row">
          <div class="col-md-6 col-md-offset-3">
            <h4>Basic Page</h4>
            <p>This index.html page is a placeholder with the CSS, font and favicon. It's just waiting for you to add some content! If you need some help hit up the <a href="http://www.getskeleton.com">Skeleton documentation</a>.</p>
          </div>
          <div class="col-md-6 col-md-offset-3">
            <p>
                If you are here I am assuming you went to school. Of the three pairs given below, pick the ones that apply to the school(s) that you went to:
            </p>
            <div class="grid-container">
              <div class="btn-1 grid-boy"><button class="btn">Rural</button></div>
              <div class="btn-2 grid-boy"><button class="btn">Urban</button></div>
              <div class="btn-3 grid-boy"><button class="btn">CBSE, ICSE, IB</button></div>
              <div class="btn-4 grid-boy"><button class="btn">State board (SSC etc.)</button></div>
              <div class="btn-5 grid-boy"><button class="btn">Government</button></div>
              <div class="btn-6 grid-boy"><button class="btn">Private</button></div>
            </div>
            <br/>
            <p>
              India has 15,51,000 schools spread across all of its states and union territories. The kind of school(s) that you went to, i.e., English-medium, CBSE school, located in an Urban area, run by a Private management, make up only 0.092% of them.
            </p>
            <p>
              Yeah. There are literally 1384 schools in India similar to yours.
            </p>
            <p>
              Shocked? Yes? No? Doesn't matter. I've got some more facts for you. Scroll on!
            </p>
          </div>
        </div>  
      </section>
    </article>
    <!-- End Lede -->

    <!-- Part 1: India against the world -->
    <article>
      <section id="scrolly-1">
        <figure id="graphic-1" class="">
          <p>This is the graphic</p>
          
        </figure>

        <article id="article-1">
          <div class="step" data-step="1">
            <p>Text 1</p>
          </div>
          <div class="step" data-step="2">
            <p>Text 2</p>
          </div>
          <div class="step" data-step="3">
            <p>Text 3</p>
          </div>
          <div class="step" data-step="4">
            <p>Text 4</p>
          </div>
          <div class="step" data-step="5">
            <p>Text 5</p>
          </div>
        </article>
      </section>
    </article>
  </div>

<!-- End Document -->
</body>
<footer>
  <script src="https://unpkg.com/d3@5.9.1/dist/d3.min.js"></script>
    <script src="https://unpkg.com/intersection-observer@0.5.1/intersection-observer.js"></script>
    <script src="js/stickyfill.min.js"></script>
    <script src="js/scrollama.min.js"></script>
    <script>
      // using d3 for convenience
      // var main = d3.select("main");

      var scrolly1 = d3.select("#scrolly-1");
      var figure1 = scrolly1.select("#graphic-1");
      var article1 = scrolly1.select("#article-1");
      var step1 = article1.selectAll(".step");
      
      var scrolly2 = d3.select("#scrolly-2");
      var figure2 = scrolly2.select("#graphic-2");
      var article2 = scrolly2.select("#article-2");
      var step2 = article2.selectAll(".step");

      // initialize the scrollama
      var scroller = scrollama();

      // generic window resize listener event
      function handleResize() {
        // 1. update height of step elements
        var stepH = Math.floor(window.innerHeight * 0.75);
        step1.style("height", stepH + "px");
        step2.style("height", stepH + "px");

        var figureHeight = window.innerHeight / 2;
        var figureMarginTop = (window.innerHeight - figureHeight) / 2;

        figure1
          .style("height", figureHeight + "px")
          .style("top", figureMarginTop + "px");

        figure2
          .style("height", figureHeight + "px")
          .style("top", figureMarginTop + "px");

        // 3. tell scrollama to update new element dimensions
        scroller.resize();
      }

      // scrollama event handlers
      function handleStepEnter(response) {
        // note: response = { element, direction, index }
        // console.log(response)

        if (response.index < step1._groups[0].length) {
          // add color to current step only
          // this function toggles the class for all elements depending on their active/inactive state
          step1.classed("is-active", function(d, i) {
            return i === response.index;
          });
          // update graphic based on step
          if (response.index === 4) {
            figure1.select("p").text("बस करो भैया");  
          } else {
          figure1.select("p").text(response.index + 1);
          }
        }

        if (response.index >= step1._groups[0].length) {
          // add color to current step only
          step2.classed("is-active", function(d, i) {
            return (i + step1._groups[0].length) === response.index;
          });
          // update graphic based on step
          figure2.select("p").text(response.index + 1);
        }
      }

      function setupStickyfill() {
        var elements = document.querySelectorAll('.sticky');
        Stickyfill.add(elements);
      }

      function init() {
        setupStickyfill();

        // 1. force a resize on load to ensure proper dimensions are sent to scrollama
        handleResize();

        // 2. setup the scroller passing options
        // 		this will also initialize trigger observations
        // 3. bind scrollama event handlers (this can be chained like below)
        scroller
          .setup({
            // step: "#scrolly-1 #article-1 .step",
            step: ".step",
            offset: 0.33,
            debug: false
          })
          .onStepEnter(handleStepEnter);

        // setup resize event
        window.addEventListener("resize", handleResize);
      }

      // kick things off
      init();
    </script>
</footer>
</html>
